from curl_cffi import CurlHttpVersion

# Rabbitmq
RABBIT_HOST = '127.0.0.1'
RABBIT_PORT = 5672
RABBIT_USERNAME = 'yuntom'
RABBIT_PASSWORD = '123456'
RABBIT_VIRTUAL_HOST = '/'

# redis 去重
# DUPEFILTER_CLASS = 'RabbitSpider.dupefilters.redisfilter.RedisFilter'
# REDIS_HOST = '127.0.0.1'
# REDIS_PORT = 6379
# REDIS_PASSWORD = None
# REDIS_DB = 1

# 内存 去重
DUPEFILTER_CLASS = 'RabbitSpider.dupefilters.memoryfilter.MemoryFilter'

# 日志
LOG_LEVEL = 'WARNING'
LOG_FILE = '../rabbit_log'

# 中间件
MIDDLEWARES = [
    'RabbitSpider.middlewares.allow_http_code.AllowHttpCodeMiddleware',
    'RabbitSpider.middlewares.retry.RetryMiddleware',
    'RabbitSpider.middlewares.default_headers.DefaultHeadersMiddleware',
    'RabbitSpider.middlewares.download_delay.DownloadDelayMiddleware',
    '${project}.middlewares.Middleware',
]

# 管道
ITEM_PIPELINES = ['pipelines.Pipeline']

# 默认请求头
DEFAULT_HEADERS = {
    'userAgent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36 Edg/120.0.0.0'
}

# 延时下载
# DOWNLOAD_DELAY = (1, 3)

# http版本
HTTP_VERSION = CurlHttpVersion.V1_0
# tls指纹
IMPERSONATE = 'chrome120'

# 最大重试次数
MAX_RETRY = 5
# 重试状态码
RETRY_HTTP_CODES = []
# 异常重试
RETRY_EXCEPTIONS = []
# 允许通过状态码
ALLOW_HTTP_CODES = [200]